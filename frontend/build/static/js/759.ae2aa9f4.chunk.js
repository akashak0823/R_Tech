"use strict";(self.webpackChunkapp_frontend=self.webpackChunkapp_frontend||[]).push([[759],{5059:(e,a,s)=>{s.r(a),s.d(a,{default:()=>w});var t=s(5043),r=s(9615),l=s(2115),o=(s(2342),s(6213)),i=s(579);const n=()=>{const e=(0,r.Zp)(),[a,s]=(0,t.useState)({username:"",password:""}),[n,d]=(0,t.useState)(!1),c=e=>{s({...a,[e.target.name]:e.target.value})};return(0,i.jsxs)("div",{className:"admin-login-container",children:[(0,i.jsxs)("video",{className:"login-bg-video",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:[(0,i.jsx)("source",{src:"/assets/Animations/Login.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,i.jsxs)("form",{className:"admin-login-form",onSubmit:async s=>{s.preventDefault(),d(!0);try{const s=await o.A.post("http://localhost:5000/api/admin/login",a);localStorage.setItem("adminToken",s.data.token),l.oR.success("\u2705 Login successful!",{position:"top-center",autoClose:1500,onClose:()=>e("/admin/dashboard")})}catch(i){var t,r;l.oR.error((null===(t=i.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"\u274c Login failed. Try again.",{position:"top-center",autoClose:3e3})}finally{d(!1)}},children:[(0,i.jsx)("img",{src:"/assets/Logo.png",alt:"Logo",className:"admin-login-logo"}),(0,i.jsx)("h2",{children:"Admin Login"}),(0,i.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:a.username,onChange:c,required:!0}),(0,i.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:a.password,onChange:c,required:!0}),(0,i.jsx)("button",{type:"submit",disabled:n,children:n?"Logging in...":"Login"}),(0,i.jsx)("p",{className:"forgot-password-link",children:(0,i.jsx)("span",{onClick:()=>e("/admin/forgot-password"),children:"Forgot Password?"})})]}),(0,i.jsx)(l.N9,{})]})};var d=s(3204),c=s(6058),u=s(7304);u.t1.register(u.Bs,u.m_,u.s$);const m=()=>{const e=(0,r.Zp)(),[a,s]=(0,t.useState)([]),[l,n]=(0,t.useState)([]),[u,m]=(0,t.useState)(0),[p,h]=(0,t.useState)(0);(0,t.useEffect)(()=>{g()},[]);const g=async()=>{try{const[e,a,t,r]=await Promise.all([o.A.get("http://localhost:5000/api/products"),o.A.get("http://localhost:5000/api/services"),o.A.get("http://localhost:5000/api/users"),o.A.get("http://localhost:5000/api/testimonials")]);s(e.data),n(a.data),m(t.data.length),h(r.data.length)}catch(e){console.error("Failed to fetch dashboard stats:",e)}},x=[{title:"Total Products",count:a.length,color:"#007bff",icon:(0,i.jsx)(d.rrY,{}),route:"/admin/products"},{title:"Total Services",count:l.length,color:"#28a745",icon:(0,i.jsx)(d.C8d,{}),route:"/admin/services"},{title:"Total Users",count:u,color:"#ffc107",icon:(0,i.jsx)(d.YXz,{}),route:"/admin/users"},{title:"Testimonials",count:p,color:"#6f42c1",icon:(0,i.jsx)(d.gt3,{}),route:"/admin/testimonials"}],j=e=>{const a={};return e.forEach(e=>{const s=e.category||"Uncategorized";a[s]=(a[s]||0)+1}),a},y=j(a),v=j(l),b={labels:Object.keys(y),datasets:[{data:Object.values(y),backgroundColor:["#007bff","#17a2b8","#6610f2","#6f42c1","#fd7e14","#20c997"]}]},f={labels:Object.keys(v),datasets:[{data:Object.values(v),backgroundColor:["#28a745","#ffc107","#dc3545","#6c757d","#17a2b8","#6610f2"]}]};return(0,i.jsxs)("div",{className:"dashboard",children:[(0,i.jsxs)("div",{className:"dashboard-topbar",children:[(0,i.jsx)("h2",{children:"Dashboard Overview"}),(0,i.jsxs)("button",{className:"logout-btn",onClick:()=>{localStorage.removeItem("adminToken"),e("/admin/login")},children:[(0,i.jsx)(d.axc,{}),"Logout"]})]}),(0,i.jsx)("div",{className:"dashboard-cards",children:x.map((a,s)=>(0,i.jsxs)("div",{className:"dashboard-card",style:{borderLeftColor:a.color,cursor:"pointer"},onClick:()=>e(a.route),children:[(0,i.jsx)("div",{className:"dashboard-icon",style:{color:a.color},children:a.icon}),(0,i.jsxs)("div",{className:"dashboard-text",children:[(0,i.jsx)("h3",{children:a.title}),(0,i.jsx)("p",{children:a.count})]})]},s))}),(0,i.jsxs)("div",{className:"dashboard-analytics",children:[(0,i.jsx)("h3",{children:"Category Analytics"}),(0,i.jsxs)("div",{className:"analytics-charts",children:[(0,i.jsxs)("div",{className:"chart-card",children:[(0,i.jsx)("h4",{children:"Product Categories"}),(0,i.jsx)(c.Fq,{data:b})]}),(0,i.jsxs)("div",{className:"chart-card",children:[(0,i.jsx)("h4",{children:"Service Categories"}),(0,i.jsx)(c.Fq,{data:f})]})]})]})]})};var p=s(1094);const h=e=>{let{initialData:a,onClose:s,onSubmit:r}=e;const l={_id:"",name:"",category:"",slug:"",description:"",keyFeatures:"",details:"",related:""},[o,n]=(0,t.useState)(l),[d,c]=(0,t.useState)(null),[u,m]=(0,t.useState)(null);(0,t.useEffect)(()=>{var e,s;a?(n({_id:a._id||"",name:a.name||"",category:a.category||"",slug:a.slug||"",description:a.description||"",keyFeatures:Array.isArray(a.keyFeatures)?a.keyFeatures.join(", "):a.keyFeatures||"",details:a.details||"",related:Array.isArray(a.related)?a.related.join(", "):a.related||""}),null!==(e=a.images)&&void 0!==e&&null!==(s=e[0])&&void 0!==s&&s.url?m(a.images[0].url):a.img?m(a.img):m(null),c(null)):(n(l),c(null),m(null))},[a]),(0,t.useEffect)(()=>()=>{u&&u.startsWith("blob:")&&URL.revokeObjectURL(u)},[u]);const p=e=>{const{name:a,value:s}=e.target;n(e=>({...e,[a]:s}))};return(0,i.jsx)("div",{className:"modal-backdrop",children:(0,i.jsxs)("div",{className:"modal-container",children:[(0,i.jsx)("h3",{children:a?"Edit Product":"Add Product"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault();const a=o.slug&&""!==o.slug.trim()?o.slug.trim():o.name.trim().toLowerCase().replace(/\s+/g,"-"),s=(o.keyFeatures||"").split(",").map(e=>e.trim()).filter(Boolean),t=(o.related||"").split(",").map(e=>e.trim()).filter(Boolean),l={_id:o._id,name:o.name,category:o.category,slug:a,description:o.description,keyFeatures:s,details:o.details,related:t,images:d?[d]:[]};r(l)},className:"modal-form",encType:"multipart/form-data",children:[(0,i.jsx)("label",{children:"Product Name"}),(0,i.jsx)("input",{name:"name",value:o.name,onChange:p,required:!0,placeholder:"Product Name"}),(0,i.jsx)("label",{children:"Category"}),(0,i.jsx)("input",{name:"category",value:o.category,onChange:p,required:!0,placeholder:"Product Category"}),(0,i.jsx)("label",{children:"Slug"}),(0,i.jsx)("input",{name:"slug",value:o.slug,onChange:p,placeholder:"URL Slug (auto-generated if empty)"}),(0,i.jsx)("label",{children:"Description"}),(0,i.jsx)("textarea",{name:"description",value:o.description,onChange:p,placeholder:"Short Description"}),(0,i.jsx)("label",{children:"Details"}),(0,i.jsx)("textarea",{name:"details",value:o.details,onChange:p,placeholder:"Detailed Explanation"}),(0,i.jsx)("label",{children:"Related Products (comma-separated)"}),(0,i.jsx)("textarea",{name:"related",value:o.related,onChange:p,placeholder:"related-product-1, related-product-2"}),(0,i.jsx)("label",{children:"Upload Product Image"}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];c(a),m(a?URL.createObjectURL(a):null)}}),u&&(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("img",{src:u,alt:"Media Preview",style:{maxWidth:200,maxHeight:150}})}),(0,i.jsx)("label",{children:"Key Features (comma-separated)"}),(0,i.jsx)("textarea",{name:"keyFeatures",value:o.keyFeatures,onChange:p,placeholder:"Feature 1, Feature 2, Feature 3"}),(0,i.jsxs)("div",{className:"modal-actions",style:{marginTop:20},children:[(0,i.jsx)("button",{type:"submit",children:a?"Update":"Add"}),(0,i.jsx)("button",{type:"button",onClick:s,className:"cancel-btn",children:"Cancel"})]})]})]})})},g=()=>{const[e,a]=(0,t.useState)([]),[s,r]=(0,t.useState)(!1),[n,d]=(0,t.useState)(null);(0,t.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=await o.A.get("http://localhost:5000/api/products");a(e.data)}catch(e){console.error("Failed to fetch products:",e),l.oR.error("Failed to fetch products")}},u=t.useMemo(()=>[{Header:"Name",accessor:"name"},{Header:"Category",accessor:"category"},{Header:"Slug",accessor:"slug"},{Header:"Description",accessor:"description"},{Header:"Details",accessor:"details"},{Header:"Related",accessor:"related",Cell:e=>{let{value:a}=e;return Array.isArray(a)?a.join(", "):a||""}},{Header:"Image",accessor:"images",Cell:e=>{var a;let{value:s}=e;if(!s||0===s.length)return"No image";const t=(null===(a=s[0])||void 0===a?void 0:a.url)||s[0];return(0,i.jsx)("img",{src:null!==t&&void 0!==t&&t.startsWith("http")?t:null===t||void 0===t?void 0:t.replace("../","/"),alt:"Product",className:"product-thumb"})}},{Header:"Actions",Cell:e=>{let{row:s}=e;return(0,i.jsxs)("div",{className:"action-btns",children:[(0,i.jsx)("button",{onClick:()=>{return e=s.original,d({_id:e._id,name:e.name||"",category:e.category||"",slug:e.slug||"",description:e.description||"",details:e.details||"",related:Array.isArray(e.related)?e.related.join(", "):e.related||"",keyFeatures:Array.isArray(e.keyFeatures)?e.keyFeatures.join(", "):e.keyFeatures||"",images:e.images||[]}),void r(!0);var e},children:"Edit"}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{await o.A.delete(`http://localhost:5000/api/products/${e}`),a(a=>a.filter(a=>a._id!==e)),l.oR.success("Product deleted successfully")}catch(s){console.error("Delete failed:",s),l.oR.error("Failed to delete product")}})(s.original._id),className:"delete-btn",children:"Delete"})]})}}],[]),{getTableProps:m,getTableBodyProps:g,headerGroups:x,rows:j,prepareRow:y}=(0,p.useTable)({columns:u,data:e});return(0,i.jsxs)("div",{className:"products-page",children:[(0,i.jsx)("h2",{children:"Manage Products"}),(0,i.jsx)("button",{className:"add-btn",onClick:()=>{d(null),r(!0)},children:"Add Product"}),(0,i.jsxs)("table",{...m(),className:"products-table",children:[(0,i.jsx)("thead",{children:x.map(e=>(0,t.createElement)("tr",{...e.getHeaderGroupProps(),key:e.id},e.headers.map(e=>(0,t.createElement)("th",{...e.getHeaderProps(),key:e.id},e.render("Header")))))}),(0,i.jsx)("tbody",{...g(),children:j.map(e=>(y(e),(0,t.createElement)("tr",{...e.getRowProps(),key:e.id},e.cells.map(e=>(0,t.createElement)("td",{...e.getCellProps(),key:e.column.id,"data-label":e.column.Header},e.render("Cell"))))))})]}),s&&(0,i.jsx)(h,{initialData:n,onClose:()=>{r(!1),d(null)},onSubmit:async e=>{try{const s=new FormData;s.append("_id",e._id||""),s.append("name",e.name),s.append("category",e.category),s.append("slug",e.slug),s.append("description",e.description),s.append("details",e.details);const t="string"===typeof e.related?e.related.split(",").map(e=>e.trim()).filter(Boolean):e.related||[];s.append("related",JSON.stringify(t));const r="string"===typeof e.keyFeatures?e.keyFeatures.split(",").map(e=>e.trim()).filter(Boolean):e.keyFeatures||[];let i;s.append("keyFeatures",JSON.stringify(r)),e.images&&e.images.length>0&&(e.images[0]instanceof File?s.append("images",e.images[0]):e._id&&s.append("oldImage",e.images[0])),e._id?(i=await o.A.put(`http://localhost:5000/api/products/${e._id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),a(a=>a.map(a=>a._id===e._id?i.data:a)),l.oR.success("Product updated successfully")):(i=await o.A.post("http://localhost:5000/api/products",s,{headers:{"Content-Type":"multipart/form-data"}}),a(e=>[...e,i.data]),l.oR.success("Product added successfully"))}catch(s){console.error("Form submission failed:",s),l.oR.error("Failed to save product")}r(!1),d(null)}}),(0,i.jsx)(l.N9,{position:"top-right",autoClose:3e3})]})},x=e=>{var a;let{initialData:s,onClose:r,onSubmit:l}=e;const o={title:"",category:"",slug:"",description:"",keyFeatures:""},[n,d]=(0,t.useState)(o),[c,u]=(0,t.useState)(null),[m,p]=(0,t.useState)(null),[h,g]=(0,t.useState)(null),[x,j]=(0,t.useState)(null);(0,t.useEffect)(()=>{var e;s?(d({title:s.title||"",category:s.category||"",slug:s.slug||"",description:s.description||"",keyFeatures:Array.isArray(s.keyFeatures)?s.keyFeatures.join(", "):s.keyFeatures||""}),p((null===(e=s.media)||void 0===e?void 0:e.url)||null),j(s.icon||null),u(null),g(null)):(d(o),u(null),p(null),g(null),j(null))},[s]),(0,t.useEffect)(()=>()=>{m&&m.startsWith("blob:")&&URL.revokeObjectURL(m),x&&x.startsWith("blob:")&&URL.revokeObjectURL(x)},[m,x]);const y=e=>{const{name:a,value:s}=e.target;d(e=>({...e,[a]:s}))};return(0,i.jsx)("div",{className:"modal-backdrop",children:(0,i.jsxs)("div",{className:"modal-container",children:[(0,i.jsx)("h3",{children:s?"Edit Service":"Add Service"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault();const a=n.slug&&""!==n.slug.trim()?n.slug.trim():n.title.trim().toLowerCase().replace(/\s+/g,"-");let s=[];"string"===typeof n.keyFeatures?s=n.keyFeatures.split(",").map(e=>e.trim()).filter(Boolean):Array.isArray(n.keyFeatures)&&(s=n.keyFeatures);const t={...n,slug:a,keyFeatures:s,media:c,icon:h};l(t)},className:"modal-form",encType:"multipart/form-data",children:[(0,i.jsx)("label",{children:"Title"}),(0,i.jsx)("input",{name:"title",value:n.title,onChange:y,required:!0,placeholder:"Service Title"}),(0,i.jsx)("label",{children:"Category"}),(0,i.jsx)("input",{name:"category",value:n.category,onChange:y,required:!0,placeholder:"Service Category"}),(0,i.jsx)("label",{children:"Slug"}),(0,i.jsx)("input",{name:"slug",value:n.slug,onChange:y,placeholder:"URL Slug (auto-generated if empty)"}),(0,i.jsx)("label",{children:"Description"}),(0,i.jsx)("textarea",{name:"description",value:n.description,onChange:y,placeholder:"Description"}),(0,i.jsx)("label",{children:"Upload Media (Image/Video)"}),(0,i.jsx)("input",{type:"file",accept:"image/*,video/*",onChange:e=>{const a=e.target.files[0];u(a),p(a?URL.createObjectURL(a):null)}}),m&&(0,i.jsx)("div",{style:{marginTop:10},children:null!==c&&void 0!==c&&null!==(a=c.type)&&void 0!==a&&a.startsWith("video/")||null!==m&&void 0!==m&&m.endsWith(".mp4")?(0,i.jsx)("video",{width:"200",controls:!0,src:m}):(0,i.jsx)("img",{src:m,alt:"Media Preview",style:{maxWidth:200,maxHeight:150}})}),(0,i.jsx)("label",{children:"Upload Icon Image"}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];g(a),j(a?URL.createObjectURL(a):null)}}),x&&(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("img",{src:x,alt:"Icon Preview",style:{maxWidth:100,maxHeight:100,borderRadius:4}})}),(0,i.jsx)("label",{children:"Key Features (comma-separated)"}),(0,i.jsx)("textarea",{name:"keyFeatures",value:n.keyFeatures,onChange:y,placeholder:"Feature 1, Feature 2, Feature 3"}),(0,i.jsxs)("div",{className:"modal-actions",style:{marginTop:20},children:[(0,i.jsx)("button",{type:"submit",children:s?"Update":"Add"}),(0,i.jsx)("button",{type:"button",onClick:r,className:"cancel-btn",children:"Cancel"})]})]})]})})},j=()=>{const[e,a]=(0,t.useState)([]),[s,r]=(0,t.useState)(!1),[n,d]=(0,t.useState)(null);(0,t.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=await o.A.get("http://localhost:5000/api/services");a(e.data)}catch(e){console.error("Failed to fetch services:",e),l.oR.error("Failed to load services.")}},u=t.useMemo(()=>[{Header:"Title",accessor:"title"},{Header:"Category",accessor:"category"},{Header:"Slug",accessor:"slug"},{Header:"Key Features",accessor:"keyFeatures",Cell:e=>{let{value:a}=e;return Array.isArray(a)?a.join(", "):""}},{Header:"Media",accessor:"media",Cell:e=>{let{value:a}=e;return a&&a.url?"video"===a.resource_type?(0,i.jsxs)("video",{width:"120",controls:!0,children:[(0,i.jsx)("source",{src:a.url,type:"video/mp4"}),"Your browser does not support the video tag."]}):(0,i.jsx)("img",{src:a.url,alt:"media",style:{width:"60px",height:"auto",borderRadius:4}}):"N/A"}},{Header:"Icon",accessor:"icon",Cell:e=>{let{value:a}=e;return a?(0,i.jsx)("img",{src:a,alt:"icon",style:{width:"60px",height:"auto",borderRadius:4}}):"N/A"}},{Header:"Actions",Cell:e=>{let{row:s}=e;return(0,i.jsxs)("div",{className:"action-btns",children:[(0,i.jsx)("button",{onClick:()=>{return e=s.original,d({...e,keyFeatures:Array.isArray(e.keyFeatures)?e.keyFeatures.join(", "):""}),void r(!0);var e},children:"Edit"}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{await o.A.delete(`http://localhost:5000/api/services/${e}`),a(a=>a.filter(a=>a._id!==e)),l.oR.success("Service deleted successfully.")}catch(s){console.error("Delete failed:",s),l.oR.error("Failed to delete service.")}})(s.original._id),className:"delete-btn",children:"Delete"})]})}}],[]),{getTableProps:m,getTableBodyProps:h,headerGroups:g,rows:j,prepareRow:y}=(0,p.useTable)({columns:u,data:e});return(0,i.jsxs)("div",{className:"services-page",children:[(0,i.jsx)("h2",{children:"Manage Services"}),(0,i.jsx)("button",{className:"add-btn",onClick:()=>r(!0),children:"Add Service"}),(0,i.jsxs)("table",{...m(),className:"services-table",children:[(0,i.jsx)("thead",{children:g.map(e=>(0,t.createElement)("tr",{...e.getHeaderGroupProps(),key:e.id},e.headers.map(e=>(0,t.createElement)("th",{...e.getHeaderProps(),key:e.id},e.render("Header")))))}),(0,i.jsx)("tbody",{...h(),children:j.map(e=>(y(e),(0,t.createElement)("tr",{...e.getRowProps(),key:e.id},e.cells.map(e=>(0,t.createElement)("td",{...e.getCellProps(),key:e.column.id,"data-label":e.column.Header},e.render("Cell"))))))})]}),s&&(0,i.jsx)(x,{type:"service",initialData:n,onClose:()=>{r(!1),d(null)},onSubmit:async e=>{try{var s,t,i,c;const r=new FormData;r.append("title",(null===(s=e.title)||void 0===s?void 0:s.trim())||""),r.append("category",(null===(t=e.category)||void 0===t?void 0:t.trim())||""),r.append("slug",(null===(i=e.slug)||void 0===i?void 0:i.trim())||""),r.append("description",(null===(c=e.description)||void 0===c?void 0:c.trim())||"");let d,u=[];"string"===typeof e.keyFeatures?u=e.keyFeatures.split(",").map(e=>e.trim()).filter(Boolean):Array.isArray(e.keyFeatures)&&(u=e.keyFeatures),r.append("keyFeatures",JSON.stringify(u)),e.icon&&r.append("icon",e.icon),e.media&&r.append("media",e.media),n?(d=await o.A.put(`http://localhost:5000/api/services/${n._id}`,r,{headers:{"Content-Type":"multipart/form-data"}}),a(e=>e.map(e=>e._id===n._id?d.data:e)),l.oR.success("Service updated successfully.")):(d=await o.A.post("http://localhost:5000/api/services",r,{headers:{"Content-Type":"multipart/form-data"}}),a(e=>[...e,d.data]),l.oR.success("Service added successfully."))}catch(u){console.error("Form submission failed:",u),l.oR.error("Operation failed. Please try again.")}r(!1),d(null)}})]})},y=e=>{let{initialData:a,onClose:s,onSubmit:r}=e;const l={_id:"",name:"",position:"",message:"",video:null},[o,n]=(0,t.useState)(l),[d,c]=(0,t.useState)(null);(0,t.useEffect)(()=>{a?(n({_id:a._id||"",name:a.name||"",position:a.position||"",message:a.message||"",video:null}),a.video&&c(a.video.startsWith("http")?a.video:a.video.replace("../","/"))):(n(l),c(null))},[a]);const u=e=>{const{name:a,value:s}=e.target;n(e=>({...e,[a]:s}))};return(0,i.jsx)("div",{className:"modal-backdrop",children:(0,i.jsxs)("div",{className:"modal-container",children:[(0,i.jsx)("h3",{children:a?"Edit Testimonial":"Add Testimonial"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(o)},className:"modal-form",encType:"multipart/form-data",children:[(0,i.jsx)("label",{children:"Name"}),(0,i.jsx)("input",{name:"name",value:o.name,onChange:u,required:!0}),(0,i.jsx)("label",{children:"Position"}),(0,i.jsx)("input",{name:"position",value:o.position,onChange:u,required:!0}),(0,i.jsx)("label",{children:"Message"}),(0,i.jsx)("textarea",{name:"message",value:o.message,onChange:u,required:!0}),(0,i.jsx)("label",{children:"Upload Video"}),(0,i.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{const a=e.target.files[0];n(e=>({...e,video:a})),a&&c(URL.createObjectURL(a))}}),d&&(0,i.jsx)("video",{src:d,controls:!0,style:{width:"100%",marginTop:10}}),(0,i.jsxs)("div",{className:"modal-actions",children:[(0,i.jsx)("button",{type:"submit",children:a?"Update":"Add"}),(0,i.jsx)("button",{type:"button",className:"cancel-btn",onClick:s,children:"Cancel"})]})]})]})})},v=()=>{const[e,a]=(0,t.useState)([]),[s,r]=(0,t.useState)(!1),[n,d]=(0,t.useState)(null);(0,t.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=await o.A.get("http://localhost:5000/api/testimonials");a(e.data)}catch(e){l.oR.error("Failed to fetch testimonials")}},u=t.useMemo(()=>[{Header:"Name",accessor:"name"},{Header:"Position",accessor:"position"},{Header:"Message",accessor:"message"},{Header:"Video",accessor:"video",Cell:e=>{let{value:a}=e;return a?(0,i.jsx)("video",{src:a.startsWith("http")?a:a.replace("../","/"),width:"100",controls:!0}):"No video"}},{Header:"Actions",Cell:e=>{let{row:s}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>{return e=s.original,d(e),void r(!0);var e},children:"Edit"}),(0,i.jsx)("button",{onClick:()=>(async e=>{try{await o.A.delete(`http://localhost:5000/api/testimonials/${e}`),a(a=>a.filter(a=>a._id!==e)),l.oR.success("Testimonial deleted successfully")}catch(s){l.oR.error("Failed to delete testimonial")}})(s.original._id),className:"delete-btn",children:"Delete"})]})}}],[]),{getTableProps:m,getTableBodyProps:h,headerGroups:g,rows:x,prepareRow:j}=(0,p.useTable)({columns:u,data:e});return(0,i.jsxs)("div",{className:"testimonials-page",children:[(0,i.jsx)("h2",{children:"Manage Testimonials"}),(0,i.jsx)("button",{className:"add-btn",onClick:()=>{d(null),r(!0)},children:"Add Testimonial"}),(0,i.jsx)("div",{className:"table-wrapper",children:(0,i.jsxs)("table",{...m(),className:"testimonials-table",children:[(0,i.jsx)("thead",{children:g.map(e=>(0,t.createElement)("tr",{...e.getHeaderGroupProps(),key:e.id},e.headers.map(e=>(0,t.createElement)("th",{...e.getHeaderProps(),key:e.id},e.render("Header")))))}),(0,i.jsx)("tbody",{...h(),children:x.map(e=>(j(e),(0,t.createElement)("tr",{...e.getRowProps(),key:e.id},e.cells.map(e=>(0,t.createElement)("td",{...e.getCellProps(),key:e.column.id,"data-label":e.column.Header},e.render("Cell"))))))})]})}),s&&(0,i.jsx)(y,{initialData:n,onClose:()=>{r(!1),d(null)},onSubmit:async e=>{try{const s=new FormData;let t;s.append("_id",e._id||""),s.append("name",e.name),s.append("position",e.position),s.append("message",e.message),e.video instanceof File?s.append("video",e.video):e._id&&s.append("oldVideo",e.video),e._id?(t=await o.A.put(`http://localhost:5000/api/testimonials/${e._id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),a(a=>a.map(a=>a._id===e._id?t.data:a)),l.oR.success("Testimonial updated successfully")):(t=await o.A.post("http://localhost:5000/api/testimonials",s,{headers:{"Content-Type":"multipart/form-data"}}),a(e=>[...e,t.data]),l.oR.success("Testimonial added successfully"))}catch(s){l.oR.error("Failed to save testimonial")}r(!1),d(null)}}),(0,i.jsx)(l.N9,{position:"top-right",autoClose:3e3})]})},b=()=>{const e=(0,r.Zp)(),[a,s]=(0,t.useState)(""),[n,d]=(0,t.useState)(!1);return(0,i.jsxs)("div",{className:"admin-login-container",children:[(0,i.jsx)("video",{className:"login-bg-video",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:(0,i.jsx)("source",{src:"/assets/Animations/Login.mp4",type:"video/mp4"})}),(0,i.jsxs)("form",{className:"admin-login-form",onSubmit:async s=>{s.preventDefault(),d(!0);try{await o.A.post("http://localhost:5000/api/admin/forgot-password",{email:a}),l.oR.success("\u2705 Reset link sent to your email!",{position:"top-center",autoClose:2e3,onClose:()=>e("/admin/login")})}catch(i){var t,r;l.oR.error((null===(t=i.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"\u274c Error sending email.",{position:"top-center",autoClose:3e3})}finally{d(!1)}},children:[(0,i.jsx)("img",{src:"/assets/Logo.png",alt:"Logo",className:"admin-login-logo"}),(0,i.jsx)("h2",{children:"Forgot Password"}),(0,i.jsx)("input",{type:"email",name:"email",placeholder:"Enter your email",value:a,onChange:e=>s(e.target.value),required:!0}),(0,i.jsx)("button",{type:"submit",disabled:n,children:n?"Sending...":"Send Reset Link"}),(0,i.jsx)("p",{className:"forgot-password-link",children:(0,i.jsx)("span",{onClick:()=>e("/admin/login"),children:"Back to Login"})})]}),(0,i.jsx)(l.N9,{})]})},f=()=>{const{token:e}=(0,r.g)(),a=(0,r.Zp)(),[s,n]=(0,t.useState)({password:"",confirmPassword:""}),[d,c]=(0,t.useState)(!1),u=e=>n({...s,[e.target.name]:e.target.value});return(0,i.jsxs)("div",{className:"admin-login-container",children:[(0,i.jsx)("video",{className:"login-bg-video",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:(0,i.jsx)("source",{src:"/assets/Animations/Login.mp4",type:"video/mp4"})}),(0,i.jsxs)("form",{className:"admin-login-form",onSubmit:async t=>{if(t.preventDefault(),s.password!==s.confirmPassword)return l.oR.error("\u274c Passwords do not match!",{position:"top-center",autoClose:3e3});c(!0);try{await o.A.post(`http://localhost:5000/api/admin/reset-password/${e}`,{password:s.password}),l.oR.success("\u2705 Password reset successful!",{position:"top-center",autoClose:2e3,onClose:()=>a("/admin/login")})}catch(n){var r,i;l.oR.error((null===(r=n.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||"\u274c Reset failed.",{position:"top-center",autoClose:3e3})}finally{c(!1)}},children:[(0,i.jsx)("img",{src:"/assets/Logo.png",alt:"Logo",className:"admin-login-logo"}),(0,i.jsx)("h2",{children:"Reset Password"}),(0,i.jsx)("input",{type:"password",name:"password",placeholder:"New Password",value:s.password,onChange:u,required:!0}),(0,i.jsx)("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:s.confirmPassword,onChange:u,required:!0}),(0,i.jsx)("button",{type:"submit",disabled:d,children:d?"Resetting...":"Reset Password"}),(0,i.jsx)("p",{className:"forgot-password-link",children:(0,i.jsx)("span",{onClick:()=>a("/admin/login"),children:"Back to Login"})})]}),(0,i.jsx)(l.N9,{})]})},C=()=>{const e=(0,r.zy)(),[a,s]=(0,t.useState)(!1),l=a=>e.pathname===a,o=()=>{window.innerWidth<=768&&s(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"sidebar-toggle",onClick:()=>s(!a),children:a?(0,i.jsx)(d.QCr,{}):(0,i.jsx)(d.OXb,{})}),(0,i.jsxs)("aside",{className:"admin-sidebar "+(a?"open":""),children:[(0,i.jsxs)("div",{className:"sidebar-logo",children:[(0,i.jsx)("img",{src:"/assets/Logo.png",alt:"RTech Logo"}),(0,i.jsx)("span",{children:"RTech Admin"})]}),(0,i.jsxs)("nav",{className:"sidebar-nav",children:[(0,i.jsxs)(r.N_,{to:"/admin/dashboard",className:l("/admin/dashboard")?"active":"",onClick:o,children:[(0,i.jsx)("i",{className:"fas fa-tachometer-alt"})," Dashboard"]}),(0,i.jsxs)(r.N_,{to:"/admin/products",className:l("/admin/products")?"active":"",onClick:o,children:[(0,i.jsx)("i",{className:"fas fa-box-open"})," Products"]}),(0,i.jsxs)(r.N_,{to:"/admin/services",className:l("/admin/services")?"active":"",onClick:o,children:[(0,i.jsx)("i",{className:"fas fa-cogs"})," Services"]}),(0,i.jsxs)(r.N_,{to:"/admin/testimonials",className:l("/admin/testimonials")?"active":"",onClick:o,children:[(0,i.jsx)("i",{className:"fas fa-comment-dots"})," Testimonials"]})]})]}),a&&(0,i.jsx)("div",{className:"overlay",onClick:()=>s(!1)})]})},k=e=>{let{children:a}=e;const[s,r]=(0,t.useState)(window.innerWidth<=768);return(0,t.useEffect)(()=>{const e=()=>r(window.innerWidth<=768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.jsxs)("div",{className:"admin-layout",children:[(0,i.jsx)(C,{}),(0,i.jsx)("main",{className:"admin-main",style:{marginLeft:s?"0":"220px",padding:"80px 30px 30px",transition:"margin-left 0.3s ease"},children:a})]})},N=e=>{let{children:a}=e;return localStorage.getItem("adminToken")?a:(0,i.jsx)(r.C5,{to:"/admin/login"})},w=()=>(0,i.jsxs)(r.BV,{children:[(0,i.jsx)(r.qh,{path:"login",element:(0,i.jsx)(n,{})}),(0,i.jsx)(r.qh,{path:"/forgot-password",element:(0,i.jsx)(b,{})}),(0,i.jsx)(r.qh,{path:"/reset-password/:token",element:(0,i.jsx)(f,{})}),(0,i.jsx)(r.qh,{path:"dashboard",element:(0,i.jsx)(N,{children:(0,i.jsx)(k,{children:(0,i.jsx)(m,{})})})}),(0,i.jsx)(r.qh,{path:"products",element:(0,i.jsx)(N,{children:(0,i.jsx)(k,{children:(0,i.jsx)(g,{})})})}),(0,i.jsx)(r.qh,{path:"services",element:(0,i.jsx)(N,{children:(0,i.jsx)(k,{children:(0,i.jsx)(j,{})})})}),(0,i.jsx)(r.qh,{path:"testimonials",element:(0,i.jsx)(N,{children:(0,i.jsx)(k,{children:(0,i.jsx)(v,{})})})})]})}}]);
//# sourceMappingURL=759.ae2aa9f4.chunk.js.map